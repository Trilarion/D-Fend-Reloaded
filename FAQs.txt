D-Fend Reloaded
Frequently asked questions



Questions:

1.) How does the update checker operates ?
2.) I get an "DFend.dat not found" error when running a self made installer
    package.
3.) I know exactly which setting is on which tab in the D-Fend profile editor
    dialog. Where is this dialog gone in D-Fend Reloaded ?
4.) I am using a special DOSBox build with some more features. Does D-Fend
    Reloaded support some of this features ?
5.) I want to use different mp3 and ogg encoders than lame and oggenc2. Can
    I change the command line D-Fend Reloaded uses to call the encoders ?
6.) I have setup "C:\Users\me\D-Fend Reloaded\VritualHD" as drive C but DOSBox
    says it has mounted "C:\Users\me\D-FEND~1\VIRTUA~1". What's wrong ?
7.) How can I create an other language for D-Fend Reloaded ?
8.) Is there an easy way of spell checking my new language file ?
9.) Where has the "Edit default profile... (F5)" menu item gone ?
10.) Can I use D-Fend Reloaded in Wine under Linux ?
11.) I can't get create a bootable HD image. Any ideas ?
12.) I have keyboard problems the DOSBox keymapper cannot fix.

	

Answers:

1.) How does the update checker operates ?

The update checker is reading this file from Sourceforge:
"http://dfendreloaded.sourceforge.net/UpdateInfo.txt" The file contains two
lines; in the first line the version number of the current D-Fend Reloaded
version on the server is given ("0.3.0" for example) and in the second line
the download URL of the update installer for this version is given
("http://downloads.sourceforge.net/dfendreloaded/D-Fend-Reloaded-0.3.0-UpdateSetup.exe"
for example). If the version number in the UpdateInfo.txt is bigger than the
version number of the currently installed D-Fend Reloaded version, the update
checker will ask you, if you want to update to the new version. If you say
"yes", it will download the file from the second line of the UpdateInfo.txt to
your temporary directory and will launch it. As the last step it tells Windows
to delete this file as soon as possible. Because the installer is just running,
Windows cannot delete the file and will put it on its "delete on next system
start" list.

At the moment the UpdateInfo.txt is a static file, but in the future there
could be version depending updates (smaller file to bring you from 0.4.0 to
0.4.1 and a bigger file to bring you from 0.3.0 to 0.4.1). Therefore D-Fend
Reloaded is adding a "?Version=0.3.0" (or whatever the current version is) to
the request URL. If you do not want the php script on Sourceforge to know
your current D-Fend Reloaded version, you can add the line
"VersionSpecificUpdateCheck=0" to the [ProgramSets] section of the "DFend.ini"
(which can be found in the D-Fend Reloaded data directory). There is not
privacy risk in sending the current version number because php scripts on
Sourceforge are not allowed to write anything to a file and therefor cannot
log any request. 

The update checker does nothing else you would do when you look for updates.
The update checker can automatically check for updates when D-Fend Reloaded
is started. But because many people do not like applications "phoning home"
without their permission, this feature is turned off by default. (You can turn
it on in the category "service" in the setup dialog. And you can manually start
the update checker at any time by choosing "Check for updates..." from the
"Help" menu.)

The update checker will use the windows connection settings (which you can edit
in the Internet Explorer). This means: If you have setup a proxy server in the
Internet Explorer, the D-Fend Reloaded update checker will use this proxy, too.



2.) I get an "DFend.dat not found" error when running a self made installer
    package.

The self made installer packages do not include D-Fend Reloaded or DOSBox. This
means you have to install D-Fend Reloaded on the computer before you can use
an installer package.

If you have installed D-Fend Reloaded in "user directory" mode (the default
installation type), the target directory is still the D-Fend Reloaded program
folder ("C:\Program Files\D-Fend Reloaded" for example) and not the data
directory (something like "C:\Users\you\D-Fend Reloaded"). The data package
installer will only read from this directory and only copy files to the
data directory, so it can run without admin rights under Vista.

If you want to have an all inclusive package, install D-Fend Reloaded in
portable mode to a directory, install or transfer the games to this installation
and then make a zip archive of this directory or simply copy the whole folder
to an USB stick. So you can show your games to others without any installation.



3.) I know exactly which setting is on which tab in the D-Fend profile editor
    dialog. Where is this dialog gone in D-Fend Reloaded ?
	
D-Fend Reloaded has two profile editor dialogs integrated: The classic D-Fend
style profile editor and the modern profile editor. Both dialogs offer all 
normal settings, so there is no need two choose one of them to be able to
access some features. Which profile editor should be used can be configured in
the setup dialog in the category "profile editor". This category will only be
visible, if you choose "Advanced" as mode in the dialog.

There are only 3 (normally hidden) special CSV build setting which are only
available in the modern style profile editor: Glide emulation, VGA chipset
settings and printer settings.



4.) I am using a special DOSBox build with some more features. Does D-Fend
    Reloaded support some of this features ?

Yes, D-Fend Reloaded supports the following CSV build features:
- Multiple floppy images per drive
- Mounting zip files (PhysFS support)
- 28 or 50 lines text mode
- Glide emulation
- VGA chipset and video RAM settings
- Printer emulation
- Some more things (new render types, new graphic cards, new MIDI device) can
  be activated by adding new default values. 
To activate the GUI for this settings, open the setup dialog, switch it to
advanced more and activate the settings you want to see in the "DOSBox CSV features"
category.

All other special functions of the custom builds are not supported directly at
the moment. But you can tell D-Fend Reloaded to write custom strings in the
DOSBox conf file: All you have to do is writing the lines you want to have
in the conf file in the "Custom settings" edit field in the "DOSBox settings"
category (or in the edit field in the "Custom settings" sheet if you use the
classic profile editor).



5.) I want to use a different mp3 and ogg encoders than lame and oggenc2. Can
    I change the command line D-Fend Reloaded uses to call the encoders ?
	
Yes. Just setup the encoder file names in the setup dialog, close D-Fend
Reloaded, open the DFend.ini (which can be found in the D-Fend Reloaded data
directory) and add / customize this two lines in the [ProgramSets] section:
WaveEncMp3Parameters=-h -V 0 "%s" "%s"
WaveEncOggParameters="%s" --output="%s" --quality=10
The first %s stands for the input wave file (including full path) and the
second will be replaced by the output file (including full path).



6.) I have setup "C:\Users\me\D-Fend Reloaded\VritualHD" as drive C but DOSBox
    says it has mounted "C:\Users\me\D-FEND~1\VIRTUA~1". What's wrong ?

"C:\Users\me\D-FEND~1\VIRTUA~1" is the short name for "C:\Users\me\D-Fend
Reloaded\VritualHD". D-Fend Reloaded translates the long name to the short name
when building the DOSBox configuration file. The Cause is DOSBox can only handle
134 chars per command. So if the path is too long DOSBox perhaps will not mount
it. To avoid this, D-Fend Reloaded changes the path name to the short version.
For this it uses the Windows API function, this means there can't be any
mismatch between the way Windows makes shorts path names and D-Fend Reloaded
does. If you want to turn this off anyway, you can write to line
"UseShortFolderNames=0" in the [ProgramSets] section of the "DFend.ini".



7.) How can I create an other language for D-Fend Reloaded ?

Just choose the menu item "Translate the program to your language" from the
"Help making D-Fend Reloaded" better sub menu of the "Help" menu. Then choose
"Start new language" and enter the name of the new language.

D-Fend Reloaded will then create a new language file and open it in the
build-in language editor. The language editor shows tables for the different
categories (menu, profile editor, setup dialog) with the English texts on
the left side and (editable) your translations on the right side. All you
have to do is make translations of the shown English strings. After closing
the language editor you can activate your language from the setup dialog (its
handled just like the predefined languages).

If you want to have your language in the next official D-Fend Reloaded release
just mail the language file to me. (You can find the user defined language
files in the folder "C:\Users\me\D-Fend Reloaded\Lang".) And of course you will
get mentioned in the language files section of the program info dialog.
Therefor you should attend one thing: Your name and the name of the language
file are shown in any D-Fend Reloaded installation so make sure this two
strings appear right under any chosen codepage/charset. (This means for
example Cyrillic letters which are not defined in the English charset should
not be used in the language name and in the author name.)

If your language file uses a special charset (like cyrillic) and this is the
default charset on your computer, everything will look fine for you (and other
people having the same Windows charset). But on systems with another default
charset your language will look broken. To avoid this, you can tell D-Fend
Reloaded to always use a special charset with your language file by setting
the "Name=" key in the [CharsetSettings] section to one of the following
values: ANSI_CHARSET, DEFAULT_CHARSET, SYMBOL_CHARSET, SHIFTJIS_CHARSET,
HANGEUL_CHARSET, GB2312_CHARSET, CHINESEBIG5_CHARSET, OEM_CHARSET,
JOHAB_CHARSET, HEBREW_CHARSET, ARABIC_CHARSET, GREEK_CHARSET, TURKISH_CHARSET,
VIETNAMESE_CHARSET, THAI_CHARSET, EASTEUROPE_CHARSET, RUSSIAN_CHARSET.
The default value "DEFAULT_CHARSET" tells D-Fend Reloaded to use the Windows
default charset. There is one more thing to mention: The charset setting
applys to all D-Fend Reloaded windows but sadly not to message boxes
which are controled by Windows itself and will always use the Windows
default charset.



8.) Is there an easy way of spell checking my new language file ?

Word processors usualy have quite good spell checkers but if you copy the whole
language file to a word processor you will get a lot of false error messages
because the word processor also trys to correct the "CouldNotDeleteFile=" parts
of the records. To avoid this you can use the following trick: Open the Windows
Notepad, press the tab key, mark the inserted tabulator (8 fields of space)
and copy it to the clipboard. Open the language file, open the replace dialog
in notepad, write in the "search for" field "=" and paste in the tab in the
"replace by" field. (This means replace all "=" by tabs.) Mark the whole file
and copy it in an spread sheet. Mark the second column (only the values
without the "CouldNotDeleteFile=" keys) and copy them to the word processor.



9.) Where has the "Edit default profile... (F5)" menu item gone ?

Because the default template is also a template the option to edit the default
template has moved to the templates editor. The default template will appear in
the templates list of the template editor. To distinguish it from the normal
templates the "Default template" text will appear in blue and you can not
delete it.

Also the separate menu item to edit the default template has gone, the hotkey
is still available. You can still reach the template profile editor via the
F5 key.



10.) Can I use D-Fend Reloaded in Wine under Linux ?

Running D-Fend Reloaded in Wine is not official supported but is reported to
work. Even so it is not official supported, D-Fend Reloaded has some
configuration options to make using it in Wine a bit easier. To activate this
options you have to add the line "Enable=1" to the [WineSupport] section of the
DFend.ini. If this line is missing or is set to "Enable=0" the following
settings are ignored by D-Fend Reloaded.

When creating DOSBox configuration files (*.conf files), D-Fend Reloaded can
remap the Wine drive letters (C:, D: etc.) to the Linux names (/mnt/sta3,
/mnt/stb1 etc.). To remap the drive letters add lines like "C=/mnt/sta5" to the
[WineSupport] section of the DFend.ini file. The character on the left side of
the "=" is the Wine drive letter (without a ":") and on the right side there is
the Linux path which is the physical representation of this drive. To activate
the remapping, add one or more of the following lines to the [WineSupport]
section:

RemapMounts=1
RemapScreenshotFolder=1
RemapMapperFile=1
RemapDOSBoxFolder=1

"RemapMounts=1" will activate the remapping of all (img-)mount commands in the
conf files, "RemapScreenshotFolder=1" will activate remapping of the captures
command in the conf file, "RemapMapperFile=1" will activate repamming of the
mapper command in the conf file and finally "RemapDOSBoxFolder=1" will activate
remapping on the DOSBox run command (and the language file command in the conf
file). If you have problems with the short names ("PROGRA~1" instead of
"Program files") see also FAQ answer 6 for stopping D-Fend Reloaded making
short folder names.

The way the create link menu command works can also be changed for use on a
Linux system: If you add a "LinuxLinkMode=1" to the [WineSupport] section, the
create link menu command will create shell scripts for running DOSBox with the
selected profile. The create link function can add a shell script preamble
(like "#!/bin/bash") to the created script. For adding a preamble as the first
line of the created shell script add a "ShellScriptPreamble=#!/bin/bash" line
to the [WineSupport] section.

You can use the same DFend.ini file and the same D-Fend Reloaded installation
in Windows and Wine (even without changing the "Enable=" key in the
[WineSupport] section): By calling D-Fend Reloaded with a command line
parameter including "WineMode" or "WineSupportEnabled" you can override the
setting from the DFend.ini and activate the Wine support. By calling D-Fend
Reloaded with a command line parameter including "WindowsMode", "NoWineSupport"
or "WineSupportDisabled"  you can override the setting from the DFend.ini and
disable the Wine support. The parameters are case insensitive and you can also
write a "-" or a "/" before them if you like to ("-winemode" for example will
also be recognized).



11.) I can't get create a bootable HD image. Any ideas ?

Trying to run a "Sys" on an image file while running in the normal DOSBox
environment (not booted any custom OS inside DOSBox) will not work at all.
The "Sys" command will not be able to write to the boot sector of the image.
So you have to boot some custom DOS inside DOSBox. The next problem is running
a (FreeDOS or MSDOS) "Sys" command on a drive created by mkdosfs.exe (the
image file creator used by D-Fend Reloaded) will result in a not anymore
readable image file. You have to start with a completely blank image file. To
create such an image file rename or temporary remove the mkdosfs.exe from the
D-Fend Reloaded program directory. D-Fend Reloaded will use the internal simple
image creator then (which will only create a big empty file). Mount this
image as driveletter "2" and boot from a MSDOS bootdisk (the FreeDOS "Sys"
command will not work on this images even this way). Call fdisk to create
a primary partition on the image. Boot again from the MSDOS bootdisk and
call "format C: /S". Now you should have  have an image file accessable by
DOSBox (by simply mounting it the normal way) which is also bootable (when
mounting it as driveletter "2").



12.) I have keyboard problems the DOSBox keymapper cannot fix.

First of all try setting the SDL video driver to "Win DIB" in the DOSBox
section of the D-Fend Reloaded setup dialog. If you still experience keyboard
problems (in particular keys not recogniced by the keymapper, even more in
particular the right shift key) and have pluged a Microsoft eHome receiver (the
official remote control for the Microsoft media centre) to your system, please
follow these steps:

1. Open the "Keyboards" section in the Device Manager.
2. Right-click "Microsoft eHome MCIR 109 Keyboard" and choose "Update Driver"
   (called "Update Driver Software" on Vista).
3. Choose "Browse my computer for software" (XP users tell have to it not to
   install automatically and say you will specify the location, then when it
   asks you where you would like it to search for drivers choose the option to
   choose from a list) then "Let me pick from a list of device drivers on my
   computer".
4. Make sure "show compatible hardware" is checked, then select "HID-compliant
   device" and click next. Click any remaining "OK" or "Finish" buttons after
   Windows has installed the driver.
   
The 109 keys driver is a Japanese keyboard driver. As long as you do not use a
109 keys keyboard doing this will not influence the functionallity of your
keyboard or your remote control. (See also http://forums.logitech.com/logitech/
board/message?board.id=general&message.id=6123.)